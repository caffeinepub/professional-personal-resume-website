{
  "kind": "build_request",
  "title": "Fix draft-domain redirect so the site consistently uses fatimachowdhury.com when reachable",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-27",
      "text": "Update the redirect logic in frontend/index.html so that opening the site on the Caffeine draft domain (e.g., https://funny-pink-4yi-draft.caffeine.xyz/) reliably redirects to https://fatimachowdhury.com/ whenever the canonical domain is reachable, even if a previous reachability check in the same browser tab/session had cached the canonical domain as unreachable.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "it still says this: https://funny-pink-4yi-draft.caffeine.xyz/"
        ]
      },
      "acceptanceCriteria": [
        "When visiting https://funny-pink-4yi-draft.caffeine.xyz/ and fatimachowdhury.com is reachable, the browser navigates to https://fatimachowdhury.com/ (the address bar shows fatimachowdhury.com).",
        "A previously cached \"canonicalDomainReachable=false\" value must not prevent redirecting forever; the app must re-check reachability after a reasonable amount of time or on subsequent loads so redirect can start working once the domain becomes reachable.",
        "If fatimachowdhury.com is not reachable/configured, the site remains accessible on the draft domain (no hard-failure redirect loop or blank page).",
        "If the URL contains a #caffeineAdminToken=... fragment, the fragment is removed (either during redirect to fatimachowdhury.com or, when staying on the draft domain, via history replace) so it is not left in the address bar."
      ]
    }
  ],
  "constraints": [
    "Do not edit files under frontend/src/components/ui or any other paths listed in frontend.immutablePaths.",
    "Keep all user-facing text in English."
  ],
  "nonGoals": [
    "Changing resume content, section layouts, or styling unrelated to domain/redirect behavior.",
    "Adding backend changes; this issue should be addressed in frontend/index.html redirect behavior only."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}